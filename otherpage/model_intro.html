<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Model</title>
    <!-- icon, css, font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Russo+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="icon" href="../image/white-bird-shape.png" type="image/x-icon">

    <link rel="stylesheet" href="../main.css">
    <link rel="stylesheet" href="../material-icon.css">
    <link rel="stylesheet" href="../bg-and-img.css">
    <link rel="stylesheet" href="../navbar.css">
    <link rel="stylesheet" href="../specific-intro.css">

    <!-- javascript -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" 
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    
</head>

<body class="bgc-primary color-light">
    <nav class="bgc-cover-primary color-light">
        <div class="container">
            <ul class="menu d-flex">
                <!-- 首頁 -->
                <li class="drop">
                    <a href="../index.html">HOME</a>
                </li>
                <!-- 面臨問題 -->
                <li class="drop">
                    <a href="./home_issue.html">ISSUE</a>
                </li>
                <!-- 未來展望 -->
                <li class="drop">
                    <a href="./home_future.html">FUTURE</a>
                </li>
                <!-- 上傳 -->
                <li class="drop">
                    <a href="./upload.html">UPLOAD</a>
                </li>
                <!-- 模型介紹 -->
                <li class="drop">
                    <a href="./model.html">MODEL
                        <span class="material-icons md-18 active">
                            keyboard_arrow_down
                        </span>
                    </a>
                    <ul class="drop-menu bgc-secondary">
                        <li class="drop">
                            <a class="active" href="./model_intro.html">INTRO</a>
                        </li>
                        <li class="drop">
                            <a href="./model_function.html">FUNCTION</a>
                        </li>
                        <li class="drop">
                            <a href="./model_method.html">METHODOLOGY</a>
                        </li>
                    </ul>
                </li>
                <!-- 聯繫我們 -->
                <li class="drop">
                    <a href="./contact.html">CONTACT</a>
                </li>
                <!-- end -->
            </ul>
        </div>
    </nav>
    <nav class="navblocker bgc-primary">It's navblocker at z-index:0</nav>
    
    <div class="intro-container">
        <div id="intro-blocker-1" class="d-none">blocker-1</div>
        <!-- intro-1 -->
        <article class="intro-book-unfix row txt-center" id="intro-1">
            <!-- intro-book-1 -->
            <div class="col-6 txt-center" id="intro-book-1">
                <div class="" style="width: 100%;">
                    <h1>Our Approach - HRCenterNet</h1>
                    <div class="intro-target">
                        <!-- <img id="intro-target-1" class="h-mid" src="../image/model-intro-1.png" alt=""> -->
                        <img id="intro-target-2" class="h-mid" src="../image/model-intro-2.png" alt="">
                    </div>
                </div>
            </div>
            <!-- intro-book-2 -->
            <div class="col-6 txt-center" id="intro-book-2">
                <div class="" style="width: 100%;">
                    <!-- DO NOT CHAMGE STYLE WIDTH:100% -->
                    <div class="intro-descript">
                        <h1 class="intro-script-1 bgc-primary">Predict centers</h1>
                        <h1 class="intro-script-2 bgc-primary">Predict height and width</h1>
                        <h1 class="intro-script-3 bgc-primary">Form bounding boxes</h1>
                    </div>
                    <div class="intro-descript">
                        <p class="intro-script-1 bgc-primary">Predict centers</p>
                        <p class="intro-script-2 bgc-primary">Predict height and width</p>
                        <p class="intro-script-3 bgc-primary">Form bounding boxes</p>
                    </div>
                    <div class="intro-test-set mt-20 h-mid" >
                        <!-- if position: absolute, h-mid will work wonderfully -->
                        <img id="intro-test-1" class="" src="../image/intro-test-1.png" alt="">
                        <img id="intro-test-2" class="" src="../image/intro-test-2.png" alt="">
                        <img id="intro-test-3" class="" src="../image/intro-test-3.png" alt="">
                    </div>
                </div>
                
            </div>
        </article>

        <!-- intro-2 -->
        <article class="intro-book-unfix row txt-center d-none bgc-cover-primary" id="intro-2">
            <!-- intro-book-3 -->
            <div class="col-4 txt-center" id="intro-book-3">
                <div class="v-center" style="width: 100%;">
                    <h1>Heatmap loss</h1>
                    <img style="width: 80%;" class="h-mid" src="../image/model-intro-1.png" alt="">
                </div>
            </div>
            <!-- intro-book-4 -->
            <div class="col-4 txt-center" id="intro-book-4">
                <div class="v-center" style="width: 100%;">
                    <h1>Unnormalized 2D Gaussian</h1>
                    <img style="width: 80%;" class="h-mid" src="../image/model-intro-eq.png" alt="">
                    <span class="material-icons intro-arrows-1">
                        arrow_right_alt
                    </span>
                </div>
            </div>
            <!-- intro-book-5 -->
            <div class="col-4 txt-center" id="intro-book-5">
                <div class="v-center" style="width: 100%;">
                    <h1>Probabilistic Distribution</h1>
                    <img style="width: 80%;" class="h-mid" src="../image/model-intro-3.png" alt="">
                    <!-- <svg id="line-1" class="showboxshape_2" width="50" height="50"><line x1="0" y1="100%" x2="100%" y2="0%" /></svg>
                    <svg id="line-2" class="showboxshape_3" width="50" height="50"><line x1="0" y1="0" x2="100%" y2="100%" /></svg> -->
                </div>
            </div>
            <!-- intro-book-6 -->
            <div class="col-4 txt-center d-none" id="intro-book-6">
                <div class="showboxshape_1 v-center" style="width: 100%;">
                    <div class="showboxshape_1 intro-book-table">
                        <table id="intro-book-table-1">
                            <tr>
                                <td>0.8</td>
                                <td>0.9</td>
                                <td>0.8</td>
                            </tr>
                            <tr>
                                <td>0.9</td>
                                <td>1</td>
                                <td>0.9</td>
                            </tr>
                            <tr>
                                <td>0.8</td>
                                <td>0.9</td>
                                <td>0.8</td>
                            </tr>
                        </table>
                        <table id="intro-book-table-2">
                            <tr>
                                <th>Our Model</th>
                            </tr>
                        </table>
                    </div>
                    <div id="air" style="height: 10vh;"></div>
                    <div class="intro-book-eq">
                        <img id="intro-book-eq-2" style="width: 100%;" class="h-mid" src="../image/model-intro-eq-2.png" alt="">
                        <img id="intro-book-eq-3"  style="width: 100%;" class="h-mid" src="../image/model-intro-eq-3.png" alt="">
                    </div>
                </div>
            </div>
            <!-- intro-book-7 -->


            <!-- intro-book-bottom -->
            <div class="col-12 txt-center showboxshape_1" id="intro-book-bottom">
                <p>
                    &emsp;&emsp;In this study, we translate the topic of bird detection into a standard single keypoint detection problem. 
                    The model output a heatmap, which is an image composed of the probability values representing the centroids in each pixel. 
                    In addition to the heatmap, the model should also output the relevant properties for each center point, 
                    including the corresponding length and width of each center point to form the binding box
                </p>
            </div>
        </article>

        <section id="intro-sec-4" class="showboxshape_3">4</section>
        <section id="intro-sec-5">5</section>
        <section id="intro-sec-6" class="showboxshape_3">6</section>
        <section id="intro-sec-7">7</section>
        <section id="intro-sec-8" class="showboxshape_3">8</section>



    </div>

    <div class="footer bg-secondary color-muted">
        <div class="container d-none jcsb">
            <div class="footer-copyright">@copyright-NCCU DSC Group of Web</div>
        </div>
    </div>

    
    <script>
        var root = document.documentElement
        var bookTop = $('#intro-1').offset().top;   

        var navblockerHere = ($('.navblocker').offset().top + document.querySelector('.navblocker').offsetHeight);
        
        var secHeight = Math.min((0.95*window.innerHeight), (1.00*window.innerHeight - document.querySelector('.navblocker').offsetHeight));
        var sec1Top = Math.min((0.05*window.innerHeight), (document.querySelector('.navblocker').offsetHeight));
        var sec2Top = 1.00*window.innerHeight;
        var sec3Top = Math.min((1.95*window.innerHeight), (2.00*window.innerHeight - 1*document.querySelector('.navblocker').offsetHeight));
        var sec4Top = Math.min((2.90*window.innerHeight), (3.00*window.innerHeight - 2*document.querySelector('.navblocker').offsetHeight));
        var sec5Top = Math.min((3.85*window.innerHeight), (4.00*window.innerHeight - 3*document.querySelector('.navblocker').offsetHeight));
        var sec6Top = Math.min((4.80*window.innerHeight), (5.00*window.innerHeight - 4*document.querySelector('.navblocker').offsetHeight));
        var sec7Top = Math.min((5.75*window.innerHeight), (6.00*window.innerHeight - 5*document.querySelector('.navblocker').offsetHeight));
        var sec8Top = Math.min((6.70*window.innerHeight), (7.00*window.innerHeight - 6*document.querySelector('.navblocker').offsetHeight));
        // window.innerHeight = 100vh

        $('#intro-blocker-1').css({ height: (sec3Top - navblockerHere)});
        console.log(bookTop);
        console.log(navblockerHere);
        console.log($('#intro-1').width());

        $(window).scroll(function() {
            // var currentScroll = $(window).scrollTop(); // get current position
            var stopBaseline = $(window).scrollTop() + navblockerHere;

            // -----------------------------------------------
            // intro-1

            // -------------------------
            // intro-1 start moving
            // at sec1
            if (stopBaseline > bookTop) {
                $('#intro-1').addClass("intro-book-fix");
                $('#intro-1').removeClass("intro-book-unfix");
            } else {
                $('#intro-1').addClass("intro-book-unfix");
                $('#intro-1').removeClass("intro-book-fix");
            }

            var introChange1 = (function(workSec) {
                var initwork = workSec + 0*secHeight;
                var stopwork = workSec + 0.4*secHeight;
                var opacity = (stopBaseline - stopwork)/(0.4*secHeight);
                if ((opacity > 0) && (opacity < 1)) { return opacity; } 
                else if (opacity > 1) { return 1; } 
                else { return 0; }
            });

            $('.intro-script-2').css({ opacity: introChange1(sec1Top)});
            $('#intro-test-2').css({ opacity: introChange1(sec1Top)});
            $('.intro-script-3').css({ opacity: introChange1(sec2Top)});
            $('#intro-test-3').css({ opacity: introChange1(sec2Top)});
            // root.style.setProperty('--intro-opacity-rule-1-1', introChange1(sec1Top));
            // root.style.setProperty('--intro-opacity-rule-1-2', introChange1(sec2Top));

            // -------------------------
            // intro-1 stop 
            // intro-2 showup
            // at sec3
            if (stopBaseline > sec3Top) {
                // console.log("should stop");
                $('#intro-1').addClass("intro-book-unfix");
                $('#intro-1').removeClass("intro-book-fix");
                $('#intro-blocker-1').removeClass("d-none");
                $('#intro-2').removeClass("d-none");

            } else {
                // console.log("should bork");
                $('#intro-1').addClass("intro-book-fix");
                $('#intro-1').removeClass("intro-book-unfix");
                $('#intro-blocker-1').addClass("d-none");
                $('#intro-2').addClass("d-none");
            }
        
            if (stopBaseline > (sec4Top - 2)) {
                $('#intro-2').addClass("intro-book-fix");
                $('#intro-2').removeClass("intro-book-unfix");
                $('#intro-2').css({ top: navblockerHere })
            } else {
                $('#intro-2').removeClass("intro-book-fix");
                $('#intro-2').addClass("intro-book-unfix");
                $('#intro-2').css({ top: 0 })
            }

            // -----------------------------------------------
            // intro-2

            var bookWidth = 0.333333 * $('#intro-2').width();
            // root.style.setProperty('--intro-book-width', bookWidth+"px");

            var introChange2 = (function (workSec) {
                var initwork = workSec - 0.7*secHeight;
                var stopwork = workSec - 0.5*secHeight;
                if ((stopBaseline > initwork) && (stopBaseline <= stopwork)) {
                    return (1 - (stopBaseline - initwork)/(0.2*secHeight)); } 
                else if (stopBaseline > stopwork) { return 0; } 
                else { return 1; }
            });

            // this is for #intro-book-3 div::after, #intro-book-5 div::after
            root.style.setProperty('--intro-book-img-height', $("#intro-book-5 > div > img").height()+"px");
            root.style.setProperty('--intro-book-img-clienttop',($("#intro-book-5 > div > img").position().top) +"px");
            root.style.setProperty('--intro-book-table-clienttop',($("#intro-book-6 > div > .intro-book-table ").position().top) +"px");
            root.style.setProperty('--intro-book-table-height',($("#intro-book-6 > div > .intro-book-table ").height()) +"px");

            // console.log($("#intro-book-6 > div > table").position().top, $("#intro-book-6 > div > table").height());
            // console.log($("#intro-book-6 > div > table").position().top, $("#intro-book-6 > div > table").height(), ($("#intro-book-5 > div > img").height()*0.5), $("#intro-book-5 > div > img").position().top);
            // console.log();
            // $("#intro-book-5 > svg").css({top: ($("#intro-book-5 > div > img").height().top)})

            // -------------------------
            // #intro-book-4 disapper 
            // #intro-book-6 appear
            // at sec5
            if (introChange2(sec5Top) < 1 && introChange2(sec5Top) >= 0.5) {
                $("#intro-book-4").css({ opacity: 2*introChange2(sec5Top) - 1 });
                $("#intro-book-4").css({ width: introChange2(sec5Top) * bookWidth });
                $('#intro-book-4').removeClass("col-4")

                $("#intro-book-6").css({ opacity: 0 });
                $("#intro-book-6").css({ width: (1-introChange2(sec5Top)) * bookWidth });
                $("#intro-book-6").addClass("no-padding");

                // $(".intro-select-box-1").css({ opacity: 0});
                root.style.setProperty('--intro-opacity-rule-2', 0);

            } else if ((introChange2(sec5Top) < 0.5 && introChange2(sec5Top) > 0)) {
                $("#intro-book-4").css({ opacity: 0 });
                $("#intro-book-4").css({ width: introChange2(sec5Top) * bookWidth});
                $("#intro-book-4").addClass("no-padding");
                $("#intro-book-4").removeClass("d-none");

                $("#intro-book-6").css({ opacity: 1 - 2*introChange2(sec5Top) });
                $("#intro-book-6").css({ width: (1-introChange2(sec5Top)) * bookWidth - 1});
                $("#intro-book-6").removeClass("d-none");

                // $(".intro-select-box-1").css({ opacity: 1 - 2*introChange2(sec5Top)});
                root.style.setProperty('--intro-opacity-rule-2', 1 - 2*introChange2(sec5Top));

            } else if (introChange2(sec5Top) == 0) {
                $("#intro-book-4").css({ opacity: 0 });
                $("#intro-book-4").addClass("no-padding");
                $("#intro-book-4").addClass("d-none");
                
                $("#intro-book-6").css({ opacity: 1 });
                $("#intro-book-6").css({ width: bookWidth });
                $('#intro-book-6').addClass("col-4")
                $("#intro-book-6").removeClass("d-none");
                $("#intro-book-6").removeClass("no-padding");

                // $(".intro-select-box-1").css({ opacity: 1 });
                root.style.setProperty('--intro-opacity-rule-2', 1);
            } else { // when == 1
                $("#intro-book-4").css({ opacity: 1 });
                $("#intro-book-4").css({ width: bookWidth });
                $('#intro-book-4').addClass("col-4")
                $("#intro-book-4").removeClass("d-none");
                $("#intro-book-4").removeClass("no-padding");

                $("#intro-book-6").css({ opacity: 0 });
                $("#intro-book-6").css({ width: 0 });
                $('#intro-book-6').addClass("d-none")
                $("#intro-book-6").addClass("no-padding");
                $("#intro-book-6").removeClass("col-4");

                // $(".intro-select-box-1").css({ opacity: 0 });
                root.style.setProperty('--intro-opacity-rule-2', 0);
            }

            // -------------------------
            // #intro-book-3 disapper
            // #intro-book-6 expand and #intro-book-eq-2 showup
            // at sec6
            if (introChange2(sec6Top) < 1 && introChange2(sec6Top) >= 0.5) {
                $("#intro-book-3").css({ opacity: 2*introChange2(sec6Top) - 1 });
                $("#intro-book-3").css({ width: introChange2(sec6Top) * bookWidth });
                $('#intro-book-3').removeClass("col-4");

                $('#intro-book-6').removeClass("col-4");
                $("#intro-book-6").css({ width: (2 - introChange2(sec6Top)) * bookWidth });

                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 0 });
                $("#intro-book-6 > div > .intro-book-table > table").css({ width: bookWidth - 24 });

                root.style.setProperty('--intro-opacity-rule-3', 1 - introChange2(sec6Top));

            } else if ((introChange2(sec6Top) < 0.5 && introChange2(sec6Top) > 0)) {
                $("#intro-book-3").css({ opacity: 0 });
                $("#intro-book-3").css({ width: introChange2(sec6Top) * bookWidth });
                $("#intro-book-3").addClass("no-padding");
                $("#intro-book-3").removeClass("d-none");

                $('#intro-book-6').removeClass("col-8");
                $("#intro-book-6").css({ width: (2 - introChange2(sec6Top)) * bookWidth});

                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 1 - 2*introChange2(sec6Top) });
                $("#intro-book-6 > div > .intro-book-table > table").css({ width: bookWidth - 24 });

                root.style.setProperty('--intro-opacity-rule-3', 1 - introChange2(sec6Top));

            } else if (introChange2(sec6Top) == 0) {
                $("#intro-book-3").css({ opacity: 0 });
                $("#intro-book-3").css({ width: 0 });
                $("#intro-book-3").addClass("d-none");

                $("#intro-book-6").css({ width: 2*bookWidth });
                $('#intro-book-6').addClass("col-8");

                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 1 })
                $("#intro-book-6 > div > .intro-book-table > table").css({ width: bookWidth - 24 })

                root.style.setProperty('--intro-opacity-rule-3', 1);
            } else {
                $("#intro-book-3").css({ opacity: 1 });
                $("#intro-book-3").css({ width: bookWidth });
                $('#intro-book-3').addClass("col-4")
                $("#intro-book-3").removeClass("d-none");
                $("#intro-book-3").removeClass("no-padding");

                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 0 })
                $("#intro-book-6 > div > .intro-book-table > table").css({ width: bookWidth - 24 })

                root.style.setProperty('--intro-opacity-rule-3', 0);
            }


            if (introChange2(sec7Top) < 1 && introChange2(sec7Top) >= 0.5) {
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-1").css({ opacity: 2*introChange2(sec7Top) - 1 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 2*introChange2(sec7Top) - 1 });

                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-2").css({ opacity: 0 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-3").css({ opacity: 0 });
            } else if ((introChange2(sec7Top) < 0.5 && introChange2(sec7Top) > 0)) {
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-1").css({ opacity: 0 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 0 });
                
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-2").css({ opacity: 1 - 2*introChange2(sec7Top) });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-3").css({ opacity: 1 - 2*introChange2(sec7Top) });
            } else if (introChange2(sec7Top) == 0) {
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-1").css({ opacity: 0 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 0 });
                
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-2").css({ opacity: 1 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-3").css({ opacity: 1 });

            } else {
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-1").css({ opacity: 1 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-2").css({ opacity: 1 });
                
                $("#intro-book-6 > div > .intro-book-table > #intro-book-table-2").css({ opacity: 0 });
                $("#intro-book-6 > div > .intro-book-eq > #intro-book-eq-3").css({ opacity: 0 });

            }
            // -----------------------------------------------
            // scroll function end
        });
        
    </script>

</body>

</html>